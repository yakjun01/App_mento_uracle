<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=360, user-scalable=no" />
        <title>긴급 연락처 수정 - SafeWalk</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Vollkorn:wght@700;900&display=swap" rel="stylesheet" />
        <link
            rel="stylesheet"
            as="style"
            crossorigin
            href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
        />
        <link rel="stylesheet" href="/css/style.css" />
    </head>
    <body>
        <div id="app-container">
            <header class="app-header">
                <a th:href="@{'/emergency-contacts'}" class="btn-icon">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <h2 class="header-title">긴급 연락처 수정</h2>
                <a th:href="@{'/emergency-contacts'}" class="btn-icon text-button">완료</a>
            </header>

            <main class="app-content">
                <div class="list-item">
                    <div class="item-info">
                        <span class="name">119 (긴급)</span>
                        <span class="phone">119</span>
                    </div>
                    <button class="delete-button"><i class="fas fa-times"></i></button>
                </div>

                <div class="list-item" th:if="${userProfile.pName != null}">
                    <div class="item-info">
                        <span class="name" th:text="${userProfile.pName + ' (' + userProfile.relation + ')'}"></span>
                        <span class="phone" th:text="${userProfile.pPhoneNumber}"></span>
                    </div>
                    <button class="delete-button"><i class="fas fa-times"></i></button>
                </div>

                <!-- 추가된 보호자 목록 -->
                <div th:each="guardian : ${userProfile.guardians}" class="list-item">
                    <div class="item-info">
                        <span class="name" th:text="${guardian.guardianName + ' (' + guardian.guardianRelation + ')'}"></span>
                        <span class="phone" th:text="${guardian.guardianPhoneNumber}"></span>
                    </div>
                    <form th:action="@{/delete-guardian/{id}(id=${guardian.id})}" method="post" style="margin: 0;">
                        <button type="submit" class="delete-button"><i class="fas fa-times"></i></button>
                    </form>
                </div>

<!--                여기 -->
                <a th:href="@{'/add-contact'}" class="btn btn-secondary"> <i class="fas fa-plus"></i> 새 연락처 추가 </a>
            </main>
        </div>
    </body>
</html>
